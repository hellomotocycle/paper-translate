# TensorFlow深度学习模型的可视化数据流图

```markdown
        摘要：我们展示了一个tf图可视化器的研究。这个工具通过可视化数据流图帮助用户明白复杂的机器学习结构。
    这个工具通过标准布局技术去产生交换图来实现图变换。我们通过去掉非关键节点和布局来简化图。为了提供一个概览，
    我们用一个源代码标记的等级结构建立一个聚集图。为了支持嵌套结构，我们进行了边缘捆绑去建立一个稳定和可响应的聚集扩展。
    最后，我们检测重复结构去强调一个模型的模块组成。为了强调可视化器的利用，我们描述了例子的利用场景和报导了用户的反馈。
    总之，用户发现可视化器非常容易去理解，调试，和分享模型的结构。

        索引条款：神经网络，图可视化，数据流图，聚集图

        1.简介
```

```markdown
    最近几年在机器学习领域有一系列的突破，特别是深度学习技术带来了戏剧化的标志性结果。深度学习的标志是他的多层计算网络。
    这个网络的复杂度，通常包括了几十层和几百万个参数，可能会导致非常难以实现。
    现代深度学习平台包括tf,theano,torch提供了高等级的API去降低难度。
    用这个API，开发者可以写一个抽象的程序去产生一个低等级的支持一系列学习算法，分布式计算和不同设备的数据流图。

    这个API和他们的数据流模型简化了深度学习神经网络的建立。开发者也不用去读代码和人工建立一个模型去理解他们复杂的结构。
    模型的可视化能帮助开发者直接检视他们的结构。
    然而，这些数据流图通常包括数以千计的异质的，低等级的操作，一些是和图的其他部分联系紧密的高等级节点。
    作为一个结果，标准布局技术例如流布局和力指向布局常常产生紊图。

    作为回答，我们展示TF图视觉器，帮助开发者明白和查看他们的TF模型。给定一个低等级的模型数据流图作为输入，
    可视化器产生展现模型的高等级结构一个交互的可视化，和深度学习专家画数据流图来展示他们的模型一样，
    这让用户去探索他们的嵌套结构。

    这个论文讲述了我们的设计过程和可视化器的设计。我们展示了一系列的图变换和视觉编码使标准流布局结构技术从机器学习的数据流图产生
    清晰的交互图。为了提供一个概览，我们建立了一个基于层级命名空间组节点的聚集图。为了支持探索，我们引进了边缘捆绑
    去产生稳定和响应的聚集流布局扩展。为了简化图，我们应用了启发式去除非关键节点，引入新的可视化编码使去除的节点从布局脱钩。
    我们也检测了重复结构去帮助用户认识模块组成。最后，我们用更多信息覆盖图来帮助开发者检视他们的模型。

    为了总结可视化器的使用，我们为深度学习模型描述了应用场景。我们也从用工具去检测深度学习模型的用户那里报导了反馈，
    讨论了使用模式。总之，开发者发现可视化易于理解，调试，和分享他们的模型结构。

        2.相关工作
        2.1数据流图应用
    数据流图在多领域产生：分布式系统，数据库，用户界面开发，可视化和工程。
    一些数据流系统用可视化作为授权的工具允许用户直接去编辑图去修饰数据流。这些系统的数据流代表了高等级的组成，
    和深度学习数据流图比起来他们的图很小。

    一个有用的数据流模型的应用领域是大型分布式系统，他们从一个程序自动生成数据流结构来进行分布式计算。
    去帮助用户诊断分布式数据库的性能，perfopticon包括了一个查询执行计划的可变化的数据流图。
    然而，他的设计不会涉及到大型数据流图。

    我们的目标是用一个清晰的概述帮助用户理解大型，复杂的数据流程序。

        2.2神经网络的可视化
    机器学习中可视化扮演了重要的角色。实践者和研究者经常用可视化去监测学习的参数和输出来帮助他们训练和优化
    他们的模型。除了图可视化器，tensorboard也包括了监测数值，张量分布，图像，音频的模块，我们在补充材料中
    描述这些模块。

    对于神经网络，不知道模型是怎么样工作的让模型优化非常困难。可视化能提高模型的透明度和可解释性。一些项目
    为特别的神经网络可视化，如卷积网络和循环网络。除了支持专家的分析，最近的项目，例如olah的交互文章，convnetjs,
    提供了交互可视化来教小白神经网络是怎么工作的。不像之前的项目关注于可视化，我们的目标是帮助用户明白
    大多数神经网络的数据流结构。

    和我们的工作相近，一些高等级的深度学习工具包如keras和mxnet leverage graphviz提供可视化模型结构的
    工具。图是高等级的比之低等级的数据操作。其他的工具包用更复杂和低等级数据流图，像graphviz。
    没有一个更好的工具，开发者必须去读代码和手工建立一个结构去理解模型。我们的可视化器目标是帮助开发者明白和审视低等级数据流图。

        2.3图可视化技术
    可视化数据流图可以被归结为画直图。一个画直图的通用方法是流布局。一个标准的流布局算法。

    为了简化大图，一个通用的技术是建立等级聚集图提供一个概览和支持聚集扩展去探索细节。

    TF是谷歌的为了实现和部署大规模机器学习模型的系统。尽管深度学习是一个中心应用，TF也支持一系列包括其他类型学习算法的模型。

        TF模型的结构
```

```markdown
    TF模型是一个数据流图表示计算。图的节点表示不同的操作。这些包括数学函数如加法和矩阵乘法；常数，序列，和随机操作为了初始化
    张量值；总结操作为了产生日志去debug；和储存模型参数的变量操作。

    TF图的边缘有三个目的。数据依赖表示张量，或多维数组，那是操作的输入和输出数据。引用边缘，或者说变量操作的输出，表示了变量的引用
    而不是它的值，允许独立操作使引用的变量变化。最后，控制独立边缘没有表示任何数据但是指示他们的原始操作必须在尾操作之前。

        建立一个TF模型
    TF API在数据流图中提供了高等级的方法为产生低等级的操作。一些，比如tf.train.gradientdescentoptimizer产生一系列低等级操作。
    真实世界网络非常复杂，一个著名的inception网络能超过36000节点。
        操作名称
    TF图的操作有独一无二的名称，一些是API生成的，另一些是用户自定义的。斜线表示等级和UNIX路径一样。
    默认的，API用操作类型作为名称以数字结尾让名称独一无二。复杂的方法像tf.train.gradientdescentiptimizer
    也自动的把他们的隐含操作放进子命名空间。

        4.激励和设计过程
    TF图可视化器的动机来源于我们和专家们的谈话，包括一个作者。当专家们讨论他们的模型，他们用图表去刻画高
    等级的结构。当工作一个新模型，他们经常读代码和画一个图表。图表对于他们的工作非常关键，机器学习专家
    希望有个工具能自动的可视化他们的模型结构。

        4.1工作分析
    新手通常用例子教学学习怎么去用TF。即使是专家也用现有的网络去建立新的模型。当修饰代码时，开发者也可以
    用可视化去发现变化。

    调查者通常手工创造图表去解释他们的模型。低等级细节像花费方法计算或参数更新机制通常在这些图表中排除。

    在模型建立中，开发者也需要去明白除了高等级结构的模型。例如，当开发者修饰一部分代码，得到了未期望的结果
    ，原因可能是模型的代码错误。这很难去知道是否这个程序真的建立了想要的模型。在这种情况下，开发者可能期望
    审视一个特殊部分去debug代码。

    从与专家的对话中，我们明白这些特性应该被支持：
    T1：明白一个模型和他们的关系的高等级组成。
    T2：认清图组成之间的相同和不同。
    T3：检视高等级组成的嵌套结构，为了低等级操作。
    T4：检视不同操作的细节。
```

```markdown
    这些事情不包括丢失函数的刻画。这种工具是非常重要的。

        4.2数据字符分析
    我们的设计过程包括查验数据流图。
    早起的实验用标准的布局工具和力指向布局产生了非常坏的结果。
    这些实验让TF模型图在通常的技术下变得有问题：
    C1：图拓扑和语义的不同。
    C2：图异质性。一些操作和连接对于理解图更不重要。
    C3：连接的节点。TF等级图的很多节点有低等级，一些图有相互连接的高等级节点。
        5.1基础编码和交互
    水平节点代表分别的操作。
        Step 1:提取非关键操作
    TF图是大的而且包括了异质操作，当开发者检视一个模型时这些是不重要的。
    我们提取了两种不同的操作，常量和总结。这两个都是松散连接：去掉他们不会改变节点之间的任何路径。
```



